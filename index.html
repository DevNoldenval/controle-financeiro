<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinanceApp - Gest√£o Financeira Pessoal</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content login-modal">
            <div class="login-header">
                <div class="login-logo">
                    <div class="logo-circle">üí≥</div>
                    <h1>FinanceApp</h1>
                </div>
                <p>Sua gest√£o financeira pessoal</p>
            </div>
            <div class="login-body">
                <div id="g_id_onload"
                     data-client_id="149224581281-7d5rqr12io40f7rr9mleoit7ttpd1etf.apps.googleusercontent.com"
                     data-callback="handleCredentialResponse">
                </div>
                <div id="g_id_signin"
                     data-type="standard"
                     data-size="large"
                     data-theme="outline"
                     data-text="signin_with"
                     data-shape="rectangular"
                     data-logo_alignment="left"
                     data-width="280">
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header" id="header" style="display: none;">
        <div class="header-content">
            <div class="header-left">
                <button class="sidebar-toggle" id="sidebarToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div class="header-logo">
                    <div class="logo-circle">üí≥</div>
                    <span>FinanceApp</span>
                </div>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <img id="userPhoto" class="user-avatar" alt="Foto do usu√°rio">
                    <span id="userName" class="user-name"></span>
                </div>
                <button id="logoutBtn" class="btn btn--outline btn--sm">
                    <span>Sair</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar" style="display: none;">
        <nav class="nav">
            <button class="nav-item active" data-screen="dashboard">
                <div class="nav-icon">üìä</div>
                <span>Dashboard</span>
            </button>
            <button class="nav-item" data-screen="lancamentos">
                <div class="nav-icon">üí∞</div>
                <span>Lan√ßamentos</span>
            </button>
            <button class="nav-item" data-screen="cartoes">
                <div class="nav-icon">üí≥</div>
                <span>Cart√µes</span>
            </button>
            <button class="nav-item" data-screen="usuarios">
                <div class="nav-icon">üë•</div>
                <span>Usu√°rios</span>
            </button>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent" style="display: none;">
        
        <!-- Dashboard Screen -->
        <div id="dashboardScreen" class="screen active">
            <div class="screen-header">
                <h2>Dashboard Financeiro</h2>
                <p>Vis√£o geral das suas finan√ßas</p>
            </div>

            <!-- Summary Cards -->
            <div class="summary-cards">
                <div class="summary-card balance">
                    <div class="card-icon">üí∞</div>
                    <div class="card-content">
                        <h3>Saldo Total</h3>
                        <p class="amount" id="saldoTotal">R$ 0,00</p>
                        <span class="change positive" id="saldoChange">+0,0%</span>
                    </div>
                </div>
                <div class="summary-card income">
                    <div class="card-icon">üìà</div>
                    <div class="card-content">
                        <h3>Receitas</h3>
                        <p class="amount income-text" id="receitasMes">R$ 0,00</p>
                        <span class="period">Este m√™s</span>
                    </div>
                </div>
                <div class="summary-card expense">
                    <div class="card-icon">üìâ</div>
                    <div class="card-content">
                        <h3>Despesas</h3>
                        <p class="amount expense-text" id="despesasMes">R$ 0,00</p>
                        <span class="period">Este m√™s</span>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-section">
                <div class="chart-card">
                    <h3>Receitas vs Despesas (6 meses)</h3>
                    <canvas id="receitasDespesasChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Despesas por Categoria</h3>
                    <canvas id="categoriaChart"></canvas>
                </div>
            </div>

            <!-- Recent Transactions -->
            <div class="recent-transactions">
                <h3>√öltimas Transa√ß√µes</h3>
                <div id="recentTransactionsList" class="transactions-list">
                    <!-- Transa√ß√µes ser√£o inseridas aqui -->
                </div>
            </div>

            <!-- Alerts -->
            <div class="alerts-section" id="alertsSection">
                <h3>Alertas</h3>
                <div id="alertsList" class="alerts-list">
                    <!-- Alertas ser√£o inseridos aqui -->
                </div>
            </div>
        </div>

        <!-- Lan√ßamentos Screen -->
        <div id="lancamentosScreen" class="screen">
            <div class="screen-header">
                <h2>Lan√ßamentos</h2>
                <p>Registre suas receitas e despesas</p>
            </div>

            <div class="form-container">
                <form id="transactionForm" class="transaction-form">
                    <!-- Tipo Toggle -->
                    <div class="form-group tipo-toggle">
                        <label class="toggle-label">
                            <input type="radio" name="tipo" value="receita" checked>
                            <span class="toggle-option receita">Receita</span>
                        </label>
                        <label class="toggle-label">
                            <input type="radio" name="tipo" value="despesa">
                            <span class="toggle-option despesa">Despesa</span>
                        </label>
                    </div>

                    <!-- Form Grid -->
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="dataTransacao">Data</label>
                            <input type="date" id="dataTransacao" name="data" required>
                        </div>

                        <div class="form-group">
                            <label for="valorTransacao">Valor</label>
                            <input type="text" id="valorTransacao" name="valor" placeholder="R$ 0,00" required>
                        </div>

                        <div class="form-group">
                            <label for="categoriaTransacao">Categoria</label>
                            <select id="categoriaTransacao" name="categoria" required>
                                <option value="">Selecione...</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="usuarioTransacao">Usu√°rio</label>
                            <select id="usuarioTransacao" name="usuario" required>
                                <option value="">Selecione...</option>
                            </select>
                        </div>

                        <div class="form-group full-width">
                            <label for="descricaoTransacao">Descri√ß√£o</label>
                            <textarea id="descricaoTransacao" name="descricao" placeholder="Descreva a transa√ß√£o..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="formaPagamento">Forma de Pagamento</label>
                            <select id="formaPagamento" name="forma_pagamento" required>
                                <option value="">Selecione...</option>
                                <option value="dinheiro">Dinheiro</option>
                                <option value="pix">PIX</option>
                                <option value="debito">D√©bito</option>
                                <option value="credito">Cr√©dito</option>
                            </select>
                        </div>

                        <!-- Se√ß√£o do Cart√£o (aparece quando cr√©dito/d√©bito) -->
                        <div id="cartaoSection" class="form-group cartao-section" style="display: none;">
                            <label for="cartaoTransacao">Cart√£o</label>
                            <select id="cartaoTransacao" name="cartao">
                                <option value="">Selecione o cart√£o...</option>
                            </select>
                        </div>

                        <!-- Se√ß√£o de Parcelamento (apenas cr√©dito) -->
                        <div id="parcelamentoSection" class="parcelamento-section" style="display: none;">
                            <div class="form-group">
                                <label class="parcelas-toggle">
                                    <input type="radio" name="tipoPagamento" value="avista" checked>
                                    <span>√Ä Vista</span>
                                </label>
                                <label class="parcelas-toggle">
                                    <input type="radio" name="tipoPagamento" value="parcelado">
                                    <span>Parcelado</span>
                                </label>
                            </div>

                            <div id="parcelasInput" class="form-group" style="display: none;">
                                <label for="numeroParcelas">N√∫mero de Parcelas</label>
                                <input type="range" id="numeroParcelas" name="parcelas" min="2" max="48" value="2">
                                <div class="parcelas-info">
                                    <span id="parcelasDisplay">2x</span>
                                    <span id="valorParcela">R$ 0,00</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions">
                        <button type="button" class="btn btn--outline" id="clearFormBtn">Limpar</button>
                        <button type="submit" class="btn btn--primary" id="saveTransactionBtn">
                            <span>Salvar Transa√ß√£o</span>
                        </button>
                    </div>
                </form>
            </div>

            <!-- Lista de Transa√ß√µes -->
            <div class="transactions-container">
                <div class="transactions-header">
                    <h3>Transa√ß√µes Recentes</h3>
                    <div class="transactions-filters">
                        <input type="search" id="searchTransactions" placeholder="Buscar transa√ß√µes...">
                        <select id="filterPeriodo">
                            <option value="">Todos os per√≠odos</option>
                            <option value="hoje">Hoje</option>
                            <option value="semana">Esta semana</option>
                            <option value="mes">Este m√™s</option>
                        </select>
                    </div>
                </div>
                <div id="transactionsList" class="transactions-list">
                    <!-- Transa√ß√µes ser√£o inseridas aqui -->
                </div>
            </div>
        </div>

        <!-- Cart√µes Screen -->
        <div id="cartoesScreen" class="screen">
            <div class="screen-header">
                <h2>Meus Cart√µes</h2>
                <p>Gerencie seus cart√µes de cr√©dito e d√©bito</p>
            </div>

            <!-- Bot√£o Adicionar Cart√£o -->
            <button class="btn btn--primary add-card-btn" id="addCardBtn">
                <span>+ Adicionar Cart√£o</span>
            </button>

            <!-- Grid de Cart√µes -->
            <div id="cardsGrid" class="cards-grid">
                <!-- Cart√µes ser√£o inseridos aqui -->
            </div>

            <!-- Modal Novo Cart√£o -->
            <div id="cardModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="cardModalTitle">Novo Cart√£o</h3>
                        <button class="modal-close" id="closeCardModal">&times;</button>
                    </div>
                    <form id="cardForm" class="card-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="nomeCartao">Nome do Cart√£o</label>
                                <input type="text" id="nomeCartao" name="nome" placeholder="Ex: Nubank Roxinho" required>
                            </div>

                            <div class="form-group">
                                <label for="ultimosDigitos">√öltimos 4 d√≠gitos</label>
                                <input type="text" id="ultimosDigitos" name="ultimos_digitos" placeholder="1234" maxlength="4" required>
                            </div>

                            <div class="form-group">
                                <label for="tipoCartao">Tipo</label>
                                <select id="tipoCartao" name="tipo" required>
                                    <option value="">Selecione...</option>
                                    <option value="credito">Cr√©dito</option>
                                    <option value="debito">D√©bito</option>
                                </select>
                            </div>

                            <div class="form-group" id="limiteGroup">
                                <label for="limiteCartao">Limite</label>
                                <input type="text" id="limiteCartao" name="limite" placeholder="R$ 0,00">
                            </div>

                            <div class="form-group" id="vencimentoGroup">
                                <label for="diaVencimento">Dia Vencimento</label>
                                <select id="diaVencimento" name="dia_vencimento">
                                    <option value="">Selecione...</option>
                                </select>
                            </div>

                            <div class="form-group" id="dataBoaGroup">
                                <label for="dataBoa">Data Boa</label>
                                <select id="dataBoa" name="data_boa">
                                    <option value="">Selecione...</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="corCartao">Cor</label>
                                <input type="color" id="corCartao" name="cor" value="#8A05BE">
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn--outline" id="cancelCardBtn">Cancelar</button>
                            <button type="submit" class="btn btn--primary">
                                <span>Salvar Cart√£o</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Usu√°rios Screen -->
        <div id="usuariosScreen" class="screen">
            <div class="screen-header">
                <h2>Usu√°rios</h2>
                <p>Gerencie os usu√°rios do sistema</p>
            </div>

            <!-- Bot√£o Adicionar Usu√°rio -->
            <button class="btn btn--primary add-user-btn" id="addUserBtn">
                <span>+ Adicionar Usu√°rio</span>
            </button>

            <!-- Grid de Usu√°rios -->
            <div id="usersGrid" class="users-grid">
                <!-- Usu√°rios ser√£o inseridos aqui -->
            </div>

            <!-- Modal Novo Usu√°rio -->
            <div id="userModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="userModalTitle">Novo Usu√°rio</h3>
                        <button class="modal-close" id="closeUserModal">&times;</button>
                    </div>
                    <form id="userForm" class="user-form">
                        <div class="form-group">
                            <label for="nomeUsuario">Nome Completo</label>
                            <input type="text" id="nomeUsuario" name="nome" placeholder="Ex: Jo√£o Silva" required>
                        </div>

                        <div class="form-group">
                            <label for="apelidoUsuario">Apelido</label>
                            <input type="text" id="apelidoUsuario" name="apelido" placeholder="Ex: Jo√£o" required>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn--outline" id="cancelUserBtn">Cancelar</button>
                            <button type="submit" class="btn btn--primary">
                                <span>Salvar Usu√°rio</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <span id="toastMessage"></span>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>Carregando...</p>
    </div>

    <script src="app.js"></script>
</body>
</html>